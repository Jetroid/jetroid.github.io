{% unless page.suppress-bg == "true" %}
{% capture background-color-partial %}{% if overridebackgroundcolor != "" and overridebackgroundcolor != nil %}{{ overridebackgroundcolor }}{% else if page.background-color != "" and page.background-color != nil %}{{ page.background-color }}{% else if layout.background-color != "" and layout.background-color != nil %}{{ layout.background-color }}{% else %}#fff{% endif %}{% endcapture %}
{% capture background-image-partial %}{% if overridebackground != "" and overridebackground != nil %}{{ overridebackground }}{% else if page.background != "" and page.background != nil %}{{ page.background }}{% else if layout.background != "" and layout.background != nil %}{{ layout.background }}{% else %}background-blog.jpg{% endif %}{% endcapture %}
{% capture background-position-partial %}{% if overridebackgroundposition != "" and overridebackgroundposition != nil %}{{ overridebackgroundposition }}{% else if page.background-position != "" and page.background-position != nil %}{{ page.background-position }}{% else if layout.background-position != "" and layout.background-position != nil %}{{ layout.background-position }}{% else %}center center{% endif %}{% endcapture %}

{% capture background-color %}{% unless background-color-partial == "" or background-color-partial == nil %}{{ background-color-partial }}{% else %}#51514D{% endunless %}{% endcapture %}
{% capture background-image %}{% unless background-image-partial == "none" or background-image-partial == "" or background-image-partial == nil %}{{ background-image-partial }}{% else %}background-blog.jpg{% endunless %}{% endcapture %}
{% capture background-position %}{% unless background-position-partial == "" or background-image-partial == nil %}{{ background-position-partial }}{% else %}center center{% endunless %}{% endcapture %}

{% assign image-extension = background-image | split: '.' | last %}
{% assign image-name = background-image | split: '.' | pop | join: '.' %}


body {
  background-color: {{ background-color }};
  background-position: {{ background-position }};
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
}
/* Our cutoffs for backgrounds are at 1920,1600,1366,1024,768,640 */
/* Default size will be 640 (mobile first) */
{%- if jekyll.environment == "production" and image-extension != "gif" -%}
body {
	background-image: url("/assets/images/backgrounds/{{ image-name }}-640.{{ image-extension }}");
}
/* Now what if we're bigger than 640? We want next size up, etc */
@media (min-width: 641px){
	body {
		background-image: url("/assets/images/backgrounds/{{ image-name }}-768.{{ image-extension }}");
	}
}
@media (min-width: 769px){
	body {
		background-image: url("/assets/images/backgrounds/{{ image-name }}-1024.{{ image-extension }}");
	}
}
@media (min-width: 1025px){
	body {
		background-image: url("/assets/images/backgrounds/{{ image-name }}-1366.{{ image-extension }}");
	}
}
@media (min-width: 1367px){
	body {
		background-image: url("/assets/images/backgrounds/{{ image-name }}-1600.{{ image-extension }}");
	}
}
@media (min-width: 1601px){
	body {
		background-image: url("/assets/images/backgrounds/{{ image-name }}-1920.{{ image-extension }}");
	}
}
/* Gone past all our breakpoints... show the original image now instead */
@media (min-width: 1921px){
	body {
		background-image: url("/assets/images/backgrounds/{{ image-name }}.{{ image-extension }}");
	}
}
{%- else -%}
body {
	background-image: url("/assets/images/backgrounds/{{ image-name }}.{{ image-extension }}");
}
{%- endif -%}
{% endunless %}