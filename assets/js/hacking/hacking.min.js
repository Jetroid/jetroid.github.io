var symbolSpansLeft=[];var symbolSpansRight=[];var pointerSpansLeft=[];var pointerSpansRight=[];var spaces=[];var cursors=[];var allWords=[];var words=[];var goalWord="";var wordlength=0;var attempts=4;var hadRefresh=false;var bracketCount=0;var terminalLocked=false;var commandPromptText=[{text:"WELCOME TO ROBCO INDUSTRIES (TM) TERMLINK",isMachine:true,delay:10,targetId:"loading-welcome",cursorId:"cp-cursor"},{text:"\>",isMachine:true,delay:400,targetId:"loading-firsttype",cursorId:"cp-cursor"},{text:"SET TERMINAL/INQUIRE","isHuman":true,delay:50,targetId:"loading-firsttype",cursorId:"cp-cursor"},{text:"RX-9000",isMachine:true,delay:10,targetId:"loading-terminalmodel",cursorId:"cp-cursor"},{text:"\>","isBreak":true,delay:200,targetId:"loading-secondtype",cursorId:"cp-cursor"},{text:"SET FILE/PROTECTION=OWNER:RWED ACCOUNTS.F","isHuman":true,delay:55,targetId:"loading-secondtype",cursorId:"cp-cursor"},{text:"\>","isBreak":true,delay:800,targetId:"loading-thirdtype",cursorId:"cp-cursor"},{text:"SET HALT RESTART/MAINT","isHuman":true,delay:50,targetId:"loading-thirdtype",cursorId:"cp-cursor"},{text:"Initializing RobCo Industries(TM) MF Boot Agent v2.3.0",isMachine:true,delay:10,targetId:"loading-information",cursorId:"cp-cursor"},{text:"<br>","isBreak":true,"isSilent":true,delay:100,targetId:"loading-information",cursorId:"cp-cursor"},{text:"RETROS BIOS",isMachine:true,delay:10,targetId:"loading-information",cursorId:"cp-cursor"},{text:"<br>","isBreak":true,"isSilent":true,delay:150,targetId:"loading-information",cursorId:"cp-cursor"},{text:"RBIOS-4.02.08.00 52EE5.E7.E8",isMachine:true,delay:10,targetId:"loading-information",cursorId:"cp-cursor"},{text:"<br>","isBreak":true,"isSilent":true,delay:200,targetId:"loading-information",cursorId:"cp-cursor"},{text:"Copyright 2075-2077 RobCo Ind.",isMachine:true,delay:10,targetId:"loading-information",cursorId:"cp-cursor"},{text:"<br>","isBreak":true,"isSilent":true,delay:600,targetId:"loading-information",cursorId:"cp-cursor"},{text:"Uppermem: 1024 KB",isMachine:true,delay:10,targetId:"loading-information",cursorId:"cp-cursor"},{text:"<br>","isBreak":true,"isSilent":true,delay:150,targetId:"loading-information",cursorId:"cp-cursor"},{text:"Root (5A8)",isMachine:true,delay:10,targetId:"loading-information",cursorId:"cp-cursor"},{text:"<br>","isBreak":true,"isSilent":true,delay:150,targetId:"loading-information",cursorId:"cp-cursor"},{text:"Maintenance Mode",isMachine:true,delay:10,targetId:"loading-information",cursorId:"cp-cursor"},{text:"\>","isBreak":true,delay:150,targetId:"loading-fourthtype",cursorId:"cp-cursor"},{text:"RUN DEBUG/ACCOUNTS.F","isHuman":true,delay:45,targetId:"loading-fourthtype",cursorId:"cp-cursor"}];var minigameText=[{text:"ROBCO INDUSTRIES (TM) TERMLINK PROTOCOL",isMachine:true,delay:10,targetId:"termlink",cursorId:"hack-cursor1"},{text:"ENTER PASSWORD NOW",isMachine:true,delay:10,targetId:"message",cursorId:"hack-cursor1"},{text:"<br><br>","isBreak":true,"isSilent":true,delay:0,targetId:"message",cursorId:"hack-cursor1"},{text:"4 Attempt(s) Left:",isMachine:true,delay:10,targetId:"attemptstext",cursorId:"hack-cursor1"},{text:" ██ ██ ██ ██",isMachine:true,delay:0,targetId:"attemptsblocks",cursorId:"hack-cursor1"},{text:"<br><br>","isBreak":true,"isSilent":true,delay:0,targetId:"attemptsnewline",cursorId:"hack-cursor1"}];var ptrleft="";var ptrright="";var symbolsleft="";var symbolsright="";var clickedBegin=false;var finishedLoading=false;window.finishedPrinting=false;var minigameSetupBegun=false;var finishPreloadStarted=false;var minigameStarted=false;var enableMinigame=false;var enablePosts=false;var enablePost=false;var hackingCursorX=null;var hackingCursorY=null;var postListCursor=null;var highlighted;var printCount=0;var targetText="";var currentText="";var highlighted_spans=[];var jsonObject={type:"div",content:[],attributes:{}};var preloadedPage=null;var tickNoise=function(){document.getElementById("tick").currentTime=0;document.getElementById("tick").play()};function escapeRegExp(string){return string.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');}var generateDataCorruption=function(){var string="";var alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890";var symbols="~#!\"$%^&*()_-+=[]{}?/,.";var words=["if","it","is","can","we","space","V4ult Teg","Pos0idon Enerxy","J3tRo1d","data","0x0000","FrxquenFy C00tral","yes","no","maybe","believe","God","food","Dog","THr33","LFser RiMle","D3thclRAW","HeliDX Hne","Help Me","MissiX9ippi QuantuXo.z P3!"];var symbolsSinceWord=generateRandomInt(250,300);var count=0;while(count<symbolsSinceWord){count+=1;if(generateRandomInt(0,100)<80){if(generateRandomInt(0,100)<80){string+=alphabet[Math.floor(Math.random()*alphabet.length)]}else{string+=symbols[Math.floor(Math.random()*symbols.length)]}if(generateRandomInt(0,10)==1){string+=" "}}else{if(words.length>0){wordindex=Math.floor(Math.random()*words.length);string+=" "+words[wordindex]+" ";words.splice(wordindex,1)}}if(generateRandomInt(0,60)==15){string+="<br>"}}string+="<br><br>FATAL ERROR: DATA CORRUPTION DETECTED. <br>PLEASE CHECK ALL CONNECTIONS.";return string};var heightWithoutPadding=function(element){var elementStyle=getComputedStyle(element);return element.clientHeight-parseFloat(elementStyle.paddingTop)-parseFloat(elementStyle.paddingBottom)};var fixYoutubes=function(){var container=document.getElementById("loggedin");var youtubes=container.querySelectorAll(".youtube");for(var i=0;i<youtubes.length;i+=1){var youtube=youtubes[i];youtube.style.height="0px";var containerHeight=heightWithoutPadding(container);var osHeight=document.getElementById("os-header").clientHeight;var youtubeHeight=containerHeight-osHeight;youtube.style.height=youtubeHeight+"px";youtube.style.width=(16/9)*youtubeHeight+"px"}};var fixImages=function(){var container=document.getElementById("loggedin");var images=container.querySelectorAll("img");for(var i=0;i<images.length;i+=1){var image=images[i];var parent=image.parentNode;if(parent.classList.contains("image-color")){continue}LazyLoad.load(image);var crunchySrc=image.srcset.split(" ")[0];image.style.backgroundImage='url('+crunchySrc+')';var parentdiv=document.createElement("DIV");parentdiv.className="image-container";var colordiv=document.createElement("DIV");colordiv.className="image-color";if(image.classList.contains("emoji")){parentdiv.classList.add("emoji-container")}var clearfix=document.createElement("DIV");clearfix.style.clear="both";parent.insertBefore(parentdiv,image);parent.removeChild(image);parentdiv.appendChild(colordiv);parentdiv.appendChild(clearfix);colordiv.appendChild(image);image.style.height="0px";var containerHeight=heightWithoutPadding(container);var osHeight=document.getElementById("os-header").clientHeight;var parentHeight=parentdiv.parentNode.clientHeight;var imageHeight=containerHeight-(osHeight+parentHeight);image.style.height=imageHeight+"px"}};function hasImage(elem){if(typeof elem==="string"){return false}if(elem.type.toUpperCase()==="IMG"){return true}for(var e=0;e<elem.content.length;e+=1){if(hasImage(elem.content[e])){return true}}return false}function hasYoutube(elem){if(typeof elem==="string"){return false}if(elem.attributes.hasOwnProperty("class")&&elem.attributes["class"].split(" ").includes("youtube")){return true}for(var e=0;e<elem.content.length;e+=1){if(hasYoutube(elem.content[e])){return true}}return false}function copyAttributes(newElem,elem){for(var key in elem.attributes){if(elem.attributes.hasOwnProperty(key)){newElem.setAttribute(key,elem.attributes[key])}}}function nextPage(){var couldntGenerate=generatePage();if(couldntGenerate){enablePosts=true;enablePost=false;document.getElementById("post-container").classList.add("hidden");document.getElementById("blog-posts").classList.remove("hidden");document.getElementById("enter").play();document.removeEventListener("click",nextPage)}}function nextPageClick(e){e=window.event||e;var element=e.target||e.srcElement;if(element.nodeName.toUpperCase()==="A"||element.parentNode.nodeName.toUpperCase()==="A"){e.cancel;return}nextPage()}function skipPrinting(){window.finishedPrinting=true}function printingDone(){document.removeEventListener("click",skipPrinting);window.finishedPrinting=true;document.addEventListener("click",nextPageClick);document.getElementById("loggedin-prompt-text").textContent="";document.getElementById("loggedin-prompt-cursor").className="cursor-flash"}function printPage(page){var messages=[];window.finishedPrinting=false;function printPageHelper(elements){for(var i=0;i<elements.length;i+=1){var sourceElem=elements[i];if(sourceElem.nodeType===3){var text=sourceElem.textContent;sourceElem.textContent="";var cursor=document.createElement("SPAN");cursor.textContent="█";cursor.classList.add("cursor-off");sourceElem.parentNode.parentNode.appendChild(cursor);messages.push({text:text,isMachine:true,delay:4,target:sourceElem.parentNode,cursor:cursor})}else{printPageHelper(Array.from(sourceElem.childNodes))}}}document.getElementById("loggedin-prompt-cursor").className="cursor-off";printPageHelper(Array.from(page.childNodes));console.log(messages);printText(messages,"finishedPrinting",printingDone,true);document.addEventListener("click",skipPrinting);document.removeEventListener("click",nextPageClick)}function generatePage(){var container=document.getElementById("loggedin");var postContainer=document.getElementById("post-container");var osheader=document.getElementById("os-header");var maxHeight=heightWithoutPadding(container)-heightWithoutPadding(osheader);while(postContainer.lastChild){postContainer.removeChild(postContainer.lastChild)}function handleContent(page,insertInto,content){while(content.length){var elem;if(page.textContent===""){elem=content[0]}else{for(var i=0;i<content.length;i+=1){elem=content[i];if(!hasImage(elem)&&!hasYoutube(elem)){break}}if(hasImage(elem)||hasYoutube(elem)){return true}}if(typeof elem==="string"){var words=elem.split(" ");content.splice(content.indexOf(elem),1);var span=document.createElement("SPAN");insertInto.appendChild(span);while(words.length){var word=words.shift();var space="";if(words.length){space=" "}span.innerHTML+=word+space;if(page.clientHeight>maxHeight){span.innerHTML=span.innerHTML.replace(new RegExp(escapeRegExp(word)+' $'),'');words.unshift(word);content.unshift(words.join(" "));return true}}}else if(hasImage(elem)){var newElem=document.createElement(elem.type);copyAttributes(newElem,elem);insertInto.appendChild(newElem);var img=document.createElement("img");var aElem=elem.content.shift();var imgElem=aElem.content[1];console.log(imgElem);copyAttributes(img,imgElem);newElem.appendChild(img);handleContent(page,newElem,elem.content);fixImages();content.splice(content.indexOf(elem),1);return true}else if(hasYoutube(elem)){var newElem=document.createElement(elem.type);copyAttributes(newElem,elem);insertInto.appendChild(newElem);var ret=handleContent(page,newElem,elem.content);if(ret===true){return true}fixYoutubes();content.splice(content.indexOf(elem),1);return true}else{var newElem=document.createElement(elem.type);copyAttributes(newElem,elem);insertInto.appendChild(newElem);var ret=handleContent(page,newElem,elem.content);if(ret===true){return true}content.splice(content.indexOf(elem),1)}}}var page;if(preloadedPage===null){if(jsonObject.content.length===0){return true}page=document.createElement("div");postContainer.appendChild(page);handleContent(page,page,jsonObject.content)}else{page=preloadedPage;postContainer.appendChild(preloadedPage);preloadedPage=null}printPage(page);if(jsonObject.content.length&&(hasImage(jsonObject.content[0])||(hasYoutube(jsonObject.content[0])))){page.classList.add("hidden");preloadedPage=document.createElement("div");postContainer.appendChild(preloadedPage);handleContent(preloadedPage,preloadedPage,jsonObject.content);postContainer.removeChild(preloadedPage);page.classList.remove("hidden")}}var viewPost=function(postURL){enablePosts=false;enablePost=true;var xhr=new XMLHttpRequest();xhr.open("GET",postURL,true);xhr.onreadystatechange=function(){if(xhr.readyState==XMLHttpRequest.DONE&&xhr.status==200){var response=xhr.responseText;var junkElement=document.createElement("div");junkElement.innerHTML=response;var pC=junkElement.querySelector(".post-container");var child=pC.firstChild;while((child=child.nextSibling)!=null){if(child.id=="post-content"){break}}var elements=Array.from(child.childNodes);function handleElements(root,elements){for(var i=0;i<elements.length;i+=1){var sourceElem=elements[i];if(sourceElem.nodeType===3){var text=sourceElem.textContent;if(text.trim().length>0){root.content.push(text)}}else{var newElem={type:sourceElem.nodeName,content:[],attributes:{}};var attr;var attributes=Array.prototype.slice.call(sourceElem.attributes);while(attr=attributes.pop()){newElem.attributes[attr.nodeName]=attr.nodeValue}root.content.push(newElem);var newElements=Array.from(sourceElem.childNodes);handleElements(newElem,newElements)}}}jsonObject={content:[]};handleElements(jsonObject,elements);document.getElementById("blog-posts").classList.add("hidden");var postContainer=document.getElementById("post-container");postContainer.classList.remove("hidden");generatePage()}else{}document.getElementById("enter").play()};xhr.send(null)};var addFeedback=function(feedback){var feedbackContent=document.getElementById("feedback").innerHTML;feedbackContent=feedbackContent.replace(/^.*?<br>/,"");feedbackContent+="&nbsp;"+feedback+"<br>";document.getElementById("feedback").innerHTML=feedbackContent};var clearEntry=function(){targetText="";currentText="";console.log("CLEAR ENTRY");document.getElementById("entry").innerHTML="";document.getElementById("key2").play();document.getElementById("hack-cursor2").className="cursor-flash"};var addEntryCharacter=function(){if(currentText===targetText||currentText.length>=targetText){document.getElementById("hack-cursor2").className="cursor-flash";return}playKeyboardSound();var newText=currentText+targetText[currentText.length];currentText=newText;document.getElementById("entry").textContent=newText;var randomDelay=generateRandomInt(0,40);setTimeout(addEntryCharacter,30+randomDelay)};var setEntry=function(content){if(currentText!=content){console.log("'"+currentText+"' '"+content+"'");targetText=content;document.getElementById("entry").textContent="";currentText="";document.getElementById("hack-cursor2").className="cursor-on";addEntryCharacter()}};var setAttempts=function(){var text=attempts+" Attempt(s) Left:";document.getElementById("attemptstext").innerHTML=text;var blocks="";for(i=0;i<attempts;i+=1){blocks+=" ██"}document.getElementById("attemptsblocks").innerHTML=blocks;if(attempts<=1){document.getElementById("message").innerHTML="!!! WARNING: LOCKOUT IMMINENT !!!<br><br>";document.getElementById("message").className="blinker"}if(attempts==0){terminalLocked=true;addFeedback(">Lockout in");addFeedback(">progress.");setTimeout(function(){document.getElementById("locked").play();document.getElementById("hacking").innerHTML="<p id=\"splashpage\">TERMINAL LOCKED<br><br>PLEASE CONTACT AN ADMINISTRATOR</p>"},2000)}};var clicked=function(span){if(enableMinigame!=true){return}if(terminalLocked){return}document.getElementById("enter").play();if(span.classList.contains("word")){var word=span.attributes["data-word"];if(word!=goalWord){document.getElementById("incorrect").play();var correct=0;for(i=0;i<wordlength;i+=1){if(goalWord.charAt(i)==word.charAt(i)){correct+=1}}addFeedback(">"+word);addFeedback(">Entry Denied");addFeedback(">"+correct+"/"+wordlength+" correct.");attempts-=1;setAttempts()}else{terminalLocked=true;enableMinigame=false;document.getElementById("correct").play();addFeedback(">"+word);addFeedback(">Exact match!");addFeedback(">Please wait");addFeedback(">while system");addFeedback(">is accessed.");setTimeout(login,2000)}}else if(span.classList.contains("bracketroot")){let bracketGroup=span.attributes["data-bracketroot"];let bracketStr=span.attributes["data-bracketstr"];unhighlightAll();span.classList.add("highlight");addFeedback(">"+bracketStr);if(!hadRefresh&&generateRandomInt(0,10)>7){hadRefresh=true;attempts=4;setAttempts();addFeedback(">Allowance");addFeedback(">replenished.")}else{var selectedWord=generateRandomInt(0,words.length);var dudWord=words[selectedWord];words.splice(selectedWord,1);var dudSpans=document.getElementsByClassName("word-"+dudWord);for(var i=0;i<dudSpans.length;i+=1){dudSpans[i].textContent=".";dudSpans[i].classList.remove("word");dudSpans[i].classList.add("symbol")}addFeedback(">Dud removed.")}span.classList.remove("bracketroot")}else if(span.classList.contains("symbol")){var symbol=span.innerHTML;addFeedback(">"+symbol);addFeedback(">Error")}};var convertToHex=function(d){var hex=Number(d).toString(16).toUpperCase();while(hex.length<4){hex="0"+hex}return "0x"+hex};var addWord=function(symbolSpans,word){for(i=0;i<word.length;i+=1){var newspan=document.createElement("SPAN");newspan.className="word word-"+word;newspan.onclick=(function(newspan){return function(){clicked(newspan)}})(newspan);newspan.onmouseleave=unhighlightAll;newspan.onmouseenter=(function(newspan){return function(){hover(newspan)}})(newspan);newspan.attributes["data-shouldbe"]=word.charAt(i);newspan.attributes["data-charpos"]=i;newspan.attributes["data-word"]=word;newspan.textContent="";symbolSpans.push(newspan)}};var generateRandomInt=function(lower,upper){return Math.floor(Math.random()*((upper-1)-lower+1)+lower)};var getSpanFromCoords=function(){var isright=hackingCursorX>=12;var column=hackingCursorX%12;if(isright){return symbolSpansRight[hackingCursorY*12+column]}else{return symbolSpansLeft[hackingCursorY*12+column]}};var hover=function(span){if(enableMinigame!=true){return}unhighlightAll();if(symbolSpansRight.includes(span)){var pos=symbolSpansRight.indexOf(span);hackingCursorX=12+(pos%12);hackingCursorY=Math.floor(pos/12)}else{var pos=symbolSpansLeft.indexOf(span);hackingCursorX=pos%12;hackingCursorY=Math.floor(pos/12)}if(span.classList.contains("word")){var word=span.attributes["data-word"];var wordSpans=document.getElementsByClassName("word-"+word);for(var i=0;i<wordSpans.length;i+=1){var wordSpan=wordSpans[i];wordSpan.classList.add("highlight")}setEntry(word)}else if(span.classList.contains("bracketroot")){let bracketGroup=span.attributes["data-bracketroot"];let bracketStr=span.attributes["data-bracketstr"];var bracketSpans=document.getElementsByClassName("bracketpair-"+bracketGroup);for(let i=0;i<bracketSpans.length;i+=1){let bracketSpan=bracketSpans[i];bracketSpan.classList.add("highlight")}setEntry(bracketStr)}else{span.classList.add("highlight");setEntry(span.textContent)}};var unhighlightAll=function(){let highlights=document.querySelectorAll("#hacking .highlight");for(let h=0;h<highlights.length;h+=1){highlights[h].classList.remove("highlight")}};var generatePointerColumn=function(ptrSpans,value,isRight){var count=0;do{var newspan=document.createElement("SPAN");newspan.className="pointer";newspan.textContent="";var leadingSpace="";if(isRight){leadingSpace=" "}newspan.attributes["data-shouldbe"]=leadingSpace+convertToHex(value)+" ";ptrSpans.push(newspan);value+=12;count+=1}while(count<17)};var generateSymbolColumn=function(symbolSpans){var symbols=["!","\"","`","$","%","^","&","*","(",")","-","_","+","=","{","[","}","]",":",";","@","\'","~","#","<",">",",","?","/","|","\\"];var symbolsSinceWord=0;var rowCounter=0;while(symbolSpans.length<17*12){var newspan=document.createElement("SPAN");newspan.className="symbol";newspan.onmouseenter=(function(newspan){return function(){hover(newspan)}})(newspan);newspan.onmouseleave=unhighlightAll;newspan.onclick=(function(newspan){return function(){clicked(newspan)}})(newspan);newspan.attributes["data-shouldbe"]=symbols[generateRandomInt(0,symbols.length)];newspan.textContent="";symbolSpans.push(newspan);symbolsSinceWord+=1;if(((symbolSpans.length+wordlength)<(17*12-5))&&(symbolsSinceWord>4)&&(symbolsSinceWord==45||(generateRandomInt(0,17)>15))&&(allWords.length>0)){var wordpos=generateRandomInt(0,allWords.length-1);var word=allWords[wordpos];allWords.splice(wordpos,1);words.push(word);addWord(symbolSpans,word);symbolsSinceWord=0}if((rowCounter+1)===Math.floor(symbolSpans.length/12)){let startOfRow=(rowCounter*12);matchBrackets(symbolSpans.slice(startOfRow,startOfRow+12));rowCounter+=1}}};var matchBrackets=function(rowArr){let bracketMatches={"{":"}","[":"]","(":")","<":">"};for(let i=0;i<11;i+=1){let startSpan=rowArr[i];let chr=startSpan.attributes["data-shouldbe"];if(chr==='{'||chr==='['||chr==='('||chr==="<"){let hasBracketMatch=false;let j;for(j=i+1;j<12;j+=1){let span=rowArr[j];if(span.classList.contains("word")){break}let chr2=span.attributes["data-shouldbe"];if(chr2==bracketMatches[chr]){hasBracketMatch=true;break}}if(hasBracketMatch){let bracketClass="bracketpair-"+bracketCount;let bracketStr="";for(let k=i;k<=j;k+=1){let bSpan=rowArr[k];bSpan.classList.add(bracketClass);bracketStr+=bSpan.attributes["data-shouldbe"]}startSpan.attributes["data-bracketroot"]=bracketCount;startSpan.attributes["data-bracketstr"]=bracketStr;startSpan.classList.add("bracketroot");bracketCount+=1}}}};var hoverPost=function(span){var highlights=document.querySelectorAll("#blog-posts .highlight");for(var h=0;h<highlights.length;h+=1){unhoverPost(highlights[h])}postListCursor=[].indexOf.call(span.parentNode.children,span);span.classList.add("highlight");printCount=0;playPrintBeep()};var unhoverPost=function(span){span.classList.remove("highlight")};var generatePostSelection=function(page){var container=document.getElementById("blog-posts");while(container.lastChild){container.removeChild(container.lastChild)}var numposts=8;if(page===0){numposts=9}var index=0;if(page>0){index+=9;index+=(page-1)*8;var previous=document.createElement("p");previous.textContent="[Previous]";previous.trigger=function(){generatePostSelection(page-1);postListCursor=null};previous.addEventListener('click',previous.trigger);previous.addEventListener('mouseenter',(function(newspan){return function(){hoverPost(newspan)}})(previous));previous.addEventListener('mouseleave',(function(newspan){return function(){unhoverPost(newspan)}})(previous));container.appendChild(previous)}for(var i=index;i<index+numposts;i+=1){var post=posts[i];var p=document.createElement("p");p.textContent="["+post.date+" "+post.title+"]";p.trigger=(function(url){return function(){viewPost(url)}})(post.url);p.addEventListener('click',p.trigger);p.addEventListener('mouseenter',(function(newspan){return function(){hoverPost(newspan)}})(p));p.addEventListener('mouseleave',(function(newspan){return function(){unhoverPost(newspan)}})(p));container.appendChild(p)}if(index+numposts<posts.length){var next=document.createElement("p");next.textContent="[Next]";next.trigger=function(){generatePostSelection(page+1);postListCursor=null};next.addEventListener('click',next.trigger);next.addEventListener('mouseenter',(function(newspan){return function(){hoverPost(newspan)}})(next));next.addEventListener('mouseleave',(function(newspan){return function(){unhoverPost(newspan)}})(next));container.appendChild(next)}};var login=function(){document.getElementById("hacking").classList.add("hidden");document.getElementById("loggedin").classList.remove("hidden");var d=new Date();var year=d.getFullYear()+60;var month="0"+(d.getMonth()+1);month=month.substr(month.length-2);var day="0"+d.getDate();day=day.substr(day.length-2);document.getElementById("todays-date").textContent=year+"-"+month+"-"+day;generatePostSelection(0);enableMinigame=false;enablePosts=true;document.getElementById("login").play()};var turnOnCursor=function(cursor){cursor.className="cursor-on"};var turnOffCursor=function(cursor){cursor.className="cursor-off"};var flashCursor=function(cursor){cursor.className="cursor-flash"};var typingEnter=function(){document.getElementById("enter").play()};var printCount=0;var playPrintBeep=function(){if(printCount==0){document.getElementById("print").play()}printCount+=1;if(printCount>4){printCount=0}};var playKeyboardSound=function(){var soundID=generateRandomInt(1,8);var sound=document.getElementById("key"+soundID);sound.currentTime=0;sound.play()};var printText=function(messages,stopPrinting,callback,withCursor){if(messages.length===0){callback();return}var messageIndex=0;var textIndex=0;var message=messages[messageIndex];var text=message.text;var target;if(message.targetId){target=document.getElementById(message.targetId)}else{target=message.target}var cursor;if(message.cursorId){cursor=document.getElementById(message.cursorId)}else{cursor=message.cursor}if(withCursor){target.classList.add("activeCommandPrompt");turnOnCursor(cursor)}var delay=message.delay;printCount=0;var handleChar=function(){if(message.isBreak){target.innerHTML=target.innerHTML+text;textIndex=text.length-1}if(message.isMachine){target.innerHTML=target.innerHTML+text[textIndex];playPrintBeep()}else if(message.isHuman){target.innerHTML=target.innerHTML+text[textIndex];playKeyboardSound()}if(textIndex<text.length-1){textIndex+=1;return printChar()}if(messageIndex<messages.length-1){messageIndex+=1;message=messages[messageIndex];if(withCursor){turnOffCursor(cursor);target.classList.remove("activeCommandPrompt")}if(message.targetId){target=document.getElementById(message.targetId)}else{target=message.target}if(message.cursorId){cursor=document.getElementById(message.cursorId)}else{cursor=message.cursor}if(withCursor){target.classList.add("activeCommandPrompt");turnOnCursor(cursor)}text=message.text;textIndex=0;printCount=0;interMessageDelay=0;if(message.isHuman){interMessageDelay=500+generateRandomInt(0,800);if(withCursor){target.classList.add("activeCommandPrompt");flashCursor(cursor)}}if(!window[stopPrinting]){setTimeout(function(){return printChar()},interMessageDelay)}else{return printChar()}}if(messageIndex===messages.length-1&&textIndex===text.length-1){if(withCursor){turnOffCursor(cursor);target.classList.remove("activeCommandPrompt")}callback()}};var printChar=function(){var randomDelay=0;if(message.isHuman){randomDelay=generateRandomInt(0,40)}if(!window[stopPrinting]){setTimeout(function(){handleChar()},delay+randomDelay)}else{handleChar()}};printChar()};var printCommandPrompt=function(){printText(commandPromptText,"finishedPrinting",function(){setTimeout(beginMinigame,700)},true)};function skipMinigamePrint(){document.removeEventListener("click",skipMinigamePrint);if(enableMinigame){return}enableMinigame=true}var printMinigame=function(){var messages=minigameText;document.addEventListener("click",skipMinigamePrint);for(var i=0;i<17;i+=1){var cursor=cursors[i];var leftptr=pointerSpansLeft[i];messages.push({text:leftptr.attributes["data-shouldbe"],isMachine:true,delay:4,target:leftptr,cursor:cursor});for(var j=0;j<12;j+=1){var leftsymb=symbolSpansLeft[i*12+j];messages.push({text:leftsymb.attributes["data-shouldbe"],isMachine:true,delay:4,target:leftsymb,cursor:cursor})}var rightptr=pointerSpansRight[i];messages.push({text:rightptr.attributes["data-shouldbe"],isMachine:true,delay:4,target:rightptr,cursor:cursor});for(var j=0;j<12;j+=1){var rightsymb=symbolSpansRight[i*12+j];messages.push({text:rightsymb.attributes["data-shouldbe"],isMachine:true,delay:4,target:rightsymb,cursor:cursor})}var space=spaces[i];messages.push({text:" ",isMachine:true,delay:4,target:space,cursor:cursor})}printText(messages,"enableMinigame",function(){setTimeout(function(){document.getElementById("minigame-prompt").classList.remove("hidden");document.removeEventListener("click",skipMinigamePrint);printCount=0;playPrintBeep();enableMinigame=true;minigameStarted=true},4)},true)};var beginMinigame=function(){if(minigameSetupBegun==true){return false}minigameSetupBegun=true;document.getElementById("loading").classList.add("hidden");document.getElementById("hacking").classList.remove("hidden");printMinigame()};var finishPreload=function(){if(finishPreloadStarted==true){console.log("REJECTED!");return false}finishPreloadStarted=true;generateSymbolColumn(symbolSpansLeft);generateSymbolColumn(symbolSpansRight);var container=document.getElementById("hacking-symbols");for(var i=0;i<17;i+=1){container.appendChild(pointerSpansLeft[i]);for(var j=0;j<12;j+=1){container.appendChild(symbolSpansLeft[i*12+j])}container.appendChild(pointerSpansRight[i]);for(var j=0;j<12;j+=1){container.appendChild(symbolSpansRight[i*12+j])}var space=document.createElement("SPAN");space.textContent="";container.appendChild(space);spaces.push(space);var cursor=document.createElement("SPAN");cursor.textContent="█";cursor.classList.add("cursor-off");container.appendChild(cursor);cursors.push(cursor);var brk=document.createElement("BR");container.appendChild(brk)}insertGoal();finishedLoading=true};var presetWords=function(){goalWord="BONFIRE";allWords=["FALLACY","REPATCH","SWELTER","PROMOTE","SOURCES","PREWORN","DUALITY","VOIDING","BOBBIES","COPPICE","BANDITO","BOILERS","BOXLIKE","CONFORM","CONFIRM","CONFIDE","GUNFIRE","FOXFIRE","CONFINE"];wordlength=7;finishPreload()};function skipBeforeXHR(){if(!clickedBegin){return}document.removeEventListener("click",skipBeforeXHR);presetWords();window.finishedPrinting=true;beginMinigame()}function skipPrompt(){if(window.finishedPrinting){document.removeEventListener("click",skipPrompt);return}document.removeEventListener("click",skipBeforeXHR);document.removeEventListener("click",skipPrompt);window.finishedPrinting=true;beginMinigame()}function skipPromptClick(e){if(e.cancel){return}skipPrompt()}var addSkipEvent=function(){document.addEventListener("click",skipPromptClick)};var preloadHacking=function(){var value=Math.floor(Math.random()*65128);generatePointerColumn(pointerSpansLeft,value,false);generatePointerColumn(pointerSpansRight,value+204,true);var xhr=new XMLHttpRequest();xhr.open("GET",'https://jetroid-hacking.herokuapp.com/',true);xhr.onreadystatechange=function(){if(xhr.readyState==XMLHttpRequest.DONE&&xhr.status==200){var response=JSON.parse(xhr.responseText);goalWord=response["goal"];allWords=response["words"];wordlength=response["length"];finishPreload();addSkipEvent()}else if(xhr.readyState==XMLHttpRequest.DONE){presetWords();addSkipEvent()}};xhr.send(null)};var insertGoal=function(){var wordindex=generateRandomInt(0,words.length);var wordToReplace=words[wordindex];words.splice(wordindex,1);var spansToChange=Array.prototype.slice.call(document.getElementsByClassName("word-"+wordToReplace));for(var k=0;k<spansToChange.length;k+=1){var span=spansToChange[k];span.classList.remove("word-"+wordToReplace);span.classList.add("word-"+goalWord);span.attributes["data-word"]=goalWord;var position=span.attributes["data-charpos"];span.attributes["data-shouldbe"]=goalWord[position]}};var turnOnClick=function(e){e.cancel=true;turnOn()};var turnOn=function(){clickedBegin=true;document.removeEventListener("click",turnOnClick);toggleFullScreen();document.body.className="";var loginSound=document.getElementById("login");loginSound.onended=function(){printCommandPrompt()};loginSound.play();var hum_sound=document.getElementById("hum1");var hum_sound2=document.getElementById("hum2");hum_sound.volume=0.2;hum_sound2.volume=0.4;hum_sound.play();hum_sound2.play();document.getElementById("hum1").addEventListener('timeupdate',function(){var buffer=.44;if(this.currentTime>this.duration-buffer){this.currentTime=0;this.play()}},false);document.getElementById("hum2").addEventListener('timeupdate',function(){var buffer=.44;if(this.currentTime>this.duration-buffer){this.currentTime=0;this.play()}},false);document.getElementById("please-rotate").classList.add("hidden");document.getElementById("click-to-start").classList.add("hidden");document.getElementById("loading").classList.remove("hidden");document.addEventListener("click",skipBeforeXHR)};var maximiseInfo=function(){document.getElementById("information-anchor").classList.toggle("open");document.getElementById("information-text").classList.toggle("open");document.getElementById("information-expand-shrink").classList.toggle("open");document.getElementById("information-hide").classList.toggle("open")};var hideInfo=function(){document.getElementById("information").classList.toggle("hide");document.getElementById("information-anchor").classList.remove("open");document.getElementById("information-text").classList.remove("open");document.getElementById("information-expand-shrink").classList.remove("open");document.getElementById("information-hide").classList.remove("open")};var mute=function(){var muteButton=document.getElementById("information-mute-unmute");muteButton.classList.toggle("mute");var sounds=document.getElementById("terminal-sounds").childNodes;for(var i=0;i<sounds.length;i+=1){if(muteButton.classList.contains("mute")){sounds[i].muted=true}else{sounds[i].muted=false}}};function toggleFullScreen(){return;}document.addEventListener("keydown",event=>{if(event.isComposing||event.keyCode===229){return}if(!clickedBegin){if(event.code==='Enter'||event.code==='Space'){turnOn()}return}if(!minigameSetupBegun){if(event.code==='Enter'||event.code==='Space'){if(goalWord===""){skipBeforeXHR()}else{skipPrompt()}}return}if(!minigameStarted){if(event.code==='Enter'||event.code==='Space'){skipMinigamePrint()}return}if(minigameStarted&&enableMinigame){var highlight=document.querySelector("#hacking .highlight");if(event.code==='Enter'||event.code==='Space'){if(highlight){clicked(highlight)}}if((hackingCursorX===null||hackingCursorY===null)&&(event.code==='KeyA'||event.code==='ArrowLeft'||event.code==='KeyD'||event.code==='ArrowRight'||event.code==='KeyW'||event.code==='ArrowUp'||event.code==='KeyS'||event.code==='ArrowDown')){hackingCursorX=0;hackingCursorY=0}else if(event.code==='KeyA'||event.code==='ArrowLeft'){hackingCursorX=Math.max(hackingCursorX-1,0);if(highlight.classList.contains("word")){var span=getSpanFromCoords();while(span.classList.contains("word")&&hackingCursorX>0){hackingCursorX=Math.max(hackingCursorX-1,0);span=getSpanFromCoords()}}}else if(event.code==='KeyD'||event.code==='ArrowRight'){hackingCursorX=Math.min(hackingCursorX+1,23);if(highlight.classList.contains("word")){var span=getSpanFromCoords();while(span.classList.contains("word")&&hackingCursorX<23){hackingCursorX=Math.min(hackingCursorX+1,23);span=getSpanFromCoords()}}}else if(event.code==='KeyW'||event.code==='ArrowUp'){hackingCursorY=Math.max(hackingCursorY-1,0)}else if(event.code==='KeyS'||event.code==='ArrowDown'){hackingCursorY=Math.min(hackingCursorY+1,16)}else{return}hover(getSpanFromCoords())}if(enablePosts){var highlight=document.querySelector("#blog-posts .highlight");if(event.code==='Enter'||event.code==='Space'){if(highlight){highlight.trigger()}}var postsList=document.getElementById("blog-posts");var postsLength=postsList.children.length;if(event.code==='KeyW'||event.code==='ArrowUp'){if(postListCursor===null){postListCursor=postsLength-1}else{postListCursor=Math.min(Math.max(postListCursor-1,0),postsLength-1)}}else if(event.code==='KeyS'||event.code==='ArrowDown'){if(postListCursor===null){postListCursor=0}else{postListCursor=Math.max(Math.min(postListCursor+1,postsLength-1),0)}}else{return}var span=postsList.children[postListCursor];hoverPost(span)}if(enablePost){if(event.code==='Enter'||event.code==='Space'){if(window.finishedPrinting){nextPage();document.removeEventListener("click",nextPageClick)}else{window.finishedPrinting=true;document.removeEventListener("click",skipPrinting)}}}});document.getElementById("effects-wrapper").className="terminal-off";document.body.onselectstart=function(){return false};preloadHacking();document.addEventListener("click",turnOnClick);